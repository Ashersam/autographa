{"ast":null,"code":"import _regeneratorRuntime from \"/home/asherphilip/Documents/autographa/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/asherphilip/Documents/autographa/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/asherphilip/Documents/autographa/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/asherphilip/Documents/autographa/renderer/src/components/main.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useEffect } from 'react';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport { IntlProvider } from 'react-intl'; // import { Observer } from \"mobx-react\";\n\nimport * as localForage from 'localforage';\nimport Router from 'next/router';\nimport NProgress from 'nprogress';\nimport ProjectsDrawer from './ProjectsPage/ProjectsDrawer';\nimport Meta from '../Meta';\nimport AutographaContextProvider from './AutogrpahaContext/AutographaContext'; // import AutographaStore from \"./AutographaStore\";\n// import AutoUpdate from \"./AutoUpdate\";\n// import { logger } from \"../logger\";\n\nRouter.onRouteChangeStart = function () {\n  NProgress.start();\n};\n\nRouter.onRouteChangeComplete = function () {\n  NProgress.done();\n};\n\nRouter.onRouteChangeError = function () {\n  NProgress.done();\n};\n\nvar messages;\nvar theme = createMuiTheme({\n  palette: {\n    type: 'light',\n    primary: {\n      light: '#757ce8',\n      main: '#212121',\n      dark: '#455a64',\n      contrastText: '#fff'\n    },\n    secondary: {\n      light: '#fff',\n      main: '#ffffff',\n      dark: '#455a64',\n      contrastText: '#000'\n    }\n  },\n  typography: {\n    fontFamily: ['-apple-system', 'BlinkMacSystemFont', '\"Segoe UI\"', 'Roboto', '\"Helvetica Neue\"', 'Arial', 'sans-serif', '\"Apple Color Emoji\"', '\"Segoe UI Emoji\"', '\"Segoe UI Symbol\"'].join(','),\n    fontSize: 14,\n    fontWeightLight: 300,\n    fontWeightRegular: 400,\n    fontWeightMedium: 500\n  },\n  overrides: {\n    MuiCssBaseline: {\n      '@global': {\n        '*::-webkit-scrollbar': {\n          width: '0.4em'\n        },\n        '*::-webkit-scrollbar-track': {\n          '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.00)'\n        },\n        '*::-webkit-scrollbar-thumb': {\n          backgroundColor: 'rgba(0,0,0,.2)',\n          outline: '1px solid slategrey'\n        }\n      }\n    }\n  }\n});\n\nvar Main = function Main() {\n  _s();\n\n  var _React$useState = React.useState('en'),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      language = _React$useState2[0],\n      setlanguage = _React$useState2[1];\n\n  var _React$useState3 = React.useState({}),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      message = _React$useState4[0],\n      setmessage = _React$useState4[1];\n\n  var getLocale = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var value;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return localForage.getItem('applang');\n\n            case 3:\n              value = _context.sent;\n\n              if (value) {\n                _context.next = 6;\n                break;\n              }\n\n              return _context.abrupt(\"return\", 'en');\n\n            case 6:\n              return _context.abrupt(\"return\", value);\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](0);\n              return _context.abrupt(\"return\", 'en');\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 9]]);\n    }));\n\n    return function getLocale() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var loadLocaleData = function loadLocaleData(locale) {\n    switch (locale) {\n      case 'en':\n        return import('../translations/en.json');\n\n      case 'hi':\n        return import('../translations/hi.json');\n\n      default:\n        // logger.warn(\"main.js, Setting to default language\");\n        return import('../translations/en.json');\n    }\n  };\n\n  useEffect(function () {\n    // logger.info(\"main.js, setting up app with preferred language\");\n    getLocale().then( /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(lang) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                // AutographaStore.appLang = lang;\n                setlanguage(lang);\n                _context2.next = 3;\n                return loadLocaleData(lang);\n\n              case 3:\n                messages = _context2.sent;\n                setmessage(messages); // AutographaStore.currentTrans = messages;\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n    NProgress.start();\n    NProgress.inc(0.4);\n    NProgress.done();\n  }, []);\n  return __jsx(React.Fragment, null, Object.keys(message).length !== 0 ? __jsx(ThemeProvider, {\n    theme: theme,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }, __jsx(AutographaContextProvider, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 11\n    }\n  }, __jsx(IntlProvider, {\n    defaultLocale: \"en\",\n    locale: language,\n    messages: message,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  }, __jsx(ProjectsDrawer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 15\n    }\n  }), __jsx(Meta, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 15\n    }\n  })))) : __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }\n  }));\n};\n\n_s(Main, \"xQO5Oq6Rpdjq/FG+SGhnMTnbUnI=\");\n\n_c = Main;\nexport default Main;\n\nvar _c;\n\n$RefreshReg$(_c, \"Main\");","map":{"version":3,"sources":["/home/asherphilip/Documents/autographa/renderer/src/components/main.js"],"names":["React","useEffect","createMuiTheme","ThemeProvider","IntlProvider","localForage","Router","NProgress","ProjectsDrawer","Meta","AutographaContextProvider","onRouteChangeStart","start","onRouteChangeComplete","done","onRouteChangeError","messages","theme","palette","type","primary","light","main","dark","contrastText","secondary","typography","fontFamily","join","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","overrides","MuiCssBaseline","width","backgroundColor","outline","Main","useState","language","setlanguage","message","setmessage","getLocale","getItem","value","loadLocaleData","locale","then","lang","inc","Object","keys","length"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport { IntlProvider } from 'react-intl';\n// import { Observer } from \"mobx-react\";\nimport * as localForage from 'localforage';\nimport Router from 'next/router';\nimport NProgress from 'nprogress';\nimport ProjectsDrawer from './ProjectsPage/ProjectsDrawer';\nimport Meta from '../Meta';\nimport AutographaContextProvider from './AutogrpahaContext/AutographaContext';\n// import AutographaStore from \"./AutographaStore\";\n// import AutoUpdate from \"./AutoUpdate\";\n// import { logger } from \"../logger\";\n\nRouter.onRouteChangeStart = () => {\n  NProgress.start();\n};\n\nRouter.onRouteChangeComplete = () => {\n  NProgress.done();\n};\n\nRouter.onRouteChangeError = () => {\n  NProgress.done();\n};\n\nlet messages;\nconst theme = createMuiTheme({\n  palette: {\n    type: 'light',\n    primary: {\n      light: '#757ce8',\n      main: '#212121',\n      dark: '#455a64',\n      contrastText: '#fff',\n    },\n    secondary: {\n      light: '#fff',\n      main: '#ffffff',\n      dark: '#455a64',\n      contrastText: '#000',\n    },\n  },\n  typography: {\n    fontFamily: [\n      '-apple-system',\n      'BlinkMacSystemFont',\n      '\"Segoe UI\"',\n      'Roboto',\n      '\"Helvetica Neue\"',\n      'Arial',\n      'sans-serif',\n      '\"Apple Color Emoji\"',\n      '\"Segoe UI Emoji\"',\n      '\"Segoe UI Symbol\"',\n    ].join(','),\n    fontSize: 14,\n    fontWeightLight: 300,\n    fontWeightRegular: 400,\n    fontWeightMedium: 500,\n  },\n  overrides: {\n    MuiCssBaseline: {\n      '@global': {\n        '*::-webkit-scrollbar': {\n          width: '0.4em',\n        },\n        '*::-webkit-scrollbar-track': {\n          '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.00)',\n        },\n        '*::-webkit-scrollbar-thumb': {\n          backgroundColor: 'rgba(0,0,0,.2)',\n          outline: '1px solid slategrey',\n        },\n      },\n    },\n  },\n});\n\nconst Main = () => {\n  const [language, setlanguage] = React.useState('en');\n  const [message, setmessage] = React.useState({});\n  const getLocale = async () => {\n    // logger.debug(\"main.js, started work for getLocale\");\n    try {\n      const value = await localForage.getItem('applang');\n      // This code runs once the value has been loaded\n      // from the offline store.\n      if (!value) {\n        // logger.error(\n        //   \"main.js, failed to fetch language from localforage, setting to default language\"\n        // );\n        return 'en';\n      } return value;\n    } catch (err) {\n      // This code runs if there were any errors.\n      // logger.error(\n      //   \"main.js, failed to fetch language from localforage, setting to default language\"\n      // );\n      return 'en';\n    }\n  };\n\n  const loadLocaleData = (locale) => {\n    switch (locale) {\n      case 'en':\n        return import('../translations/en.json');\n      case 'hi':\n        return import('../translations/hi.json');\n      default:\n        // logger.warn(\"main.js, Setting to default language\");\n        return import('../translations/en.json');\n    }\n  };\n\n  useEffect(() => {\n    // logger.info(\"main.js, setting up app with preferred language\");\n    getLocale().then(async (lang) => {\n      // AutographaStore.appLang = lang;\n      setlanguage(lang);\n      messages = await loadLocaleData(lang);\n      setmessage(messages);\n      // AutographaStore.currentTrans = messages;\n    });\n    NProgress.start();\n    NProgress.inc(0.4);\n    NProgress.done();\n  }, []);\n\n  return (\n    <>\n      {Object.keys(message).length !== 0 ? (\n        <ThemeProvider theme={theme}>\n          <AutographaContextProvider>\n            <IntlProvider\n              defaultLocale=\"en\"\n              locale={language}\n              messages={message}\n            >\n              <ProjectsDrawer />\n              <Meta />\n            </IntlProvider>\n          </AutographaContextProvider>\n        </ThemeProvider>\n      ) : (\n        <div />\n      )}\n    </>\n  );\n};\n\nexport default Main;\n"]},"metadata":{},"sourceType":"module"}
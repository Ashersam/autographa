{"ast":null,"code":"var _jsxFileName = \"/home/asherphilip/Documents/autographa/renderer/src/components/ProjectsPage/CreateProject/CustomSpecification.js\";\nvar __jsx = React.createElement;\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\nimport MuiDialogContent from '@material-ui/core/DialogContent';\nimport MuiDialogActions from '@material-ui/core/DialogActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Typography from '@material-ui/core/Typography';\nimport { Box, FormControl, FormLabel, Grid, ListItem, ListItemText, TextField, Zoom } from '@material-ui/core';\nimport * as localForage from 'localforage';\nimport { CreateProjectStyles } from './useStyles/CreateProjectStyles';\nimport * as logger from '../../../logger';\nconst Transition = /*#__PURE__*/React.forwardRef((props, ref) => __jsx(Zoom, _extends({\n  style: {\n    transitionDelay: '50ms'\n  },\n  direction: \"up\",\n  ref: ref\n}, props, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 3\n  }\n})));\n\nconst styles = theme => ({\n  root: {\n    margin: 0,\n    padding: theme.spacing(2)\n  },\n  closeButton: {\n    position: 'absolute',\n    right: theme.spacing(1),\n    top: theme.spacing(1),\n    color: theme.palette.grey[500]\n  }\n});\n\nconst DialogTitle = withStyles(styles)(props => {\n  const {\n    children,\n    classes,\n    onClose\n  } = props,\n        other = _objectWithoutProperties(props, [\"children\", \"classes\", \"onClose\"]);\n\n  return __jsx(MuiDialogTitle, _extends({\n    disableTypography: true,\n    className: classes.root\n  }, other, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }), __jsx(Typography, {\n    variant: \"h6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, children), onClose ? __jsx(IconButton, {\n    \"aria-label\": \"close\",\n    className: classes.closeButton,\n    onClick: onClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, __jsx(CloseIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  })) : null);\n});\nconst DialogContent = withStyles(theme => ({\n  root: {\n    padding: theme.spacing(2)\n  }\n}))(MuiDialogContent);\nconst DialogActions = withStyles(theme => ({\n  root: {\n    margin: 0,\n    padding: theme.spacing(1)\n  }\n}))(MuiDialogActions);\nexport default function CustomSpecification({\n  opencustom,\n  setCustonOpen,\n  allbooks,\n  setContent,\n  canonSpecification,\n  updateCanonItems,\n  setUpdateCanonItems,\n  setcanonSpecification\n}) {\n  const classes = CreateProjectStyles();\n  const textRef = useRef();\n  const [selectedbook, setSelectedbook] = React.useState([]);\n  const [highlight, setHighlight] = React.useState(false);\n  const [customselectedbookObj, setCustomelectedbookObj] = React.useState([]);\n  useEffect(() => {\n    localForage.getItem('custonSpec', (err, value) => {\n      setCustomelectedbookObj(value);\n      logger.debug('customspecification.js', `changed custom on canonSpec change with ${customselectedbookObj}`);\n\n      if (err) {\n        logger.error('customspecification.js', 'failed to get customspec');\n      }\n    });\n\n    if (customselectedbookObj) {\n      const result = customselectedbookObj.filter(obj => obj.id === canonSpecification);\n\n      if (result[0] !== undefined) {\n        setContent(result[0].books);\n      }\n    } // eslint-disable-next-line\n\n  }, [canonSpecification]);\n  useEffect(() => {\n    localForage.getItem('custonSpec', (err, value) => {\n      let custonspec;\n      let duplicate = false;\n\n      if (value !== null) {\n        value.forEach(fields => {\n          updateCanonItems.forEach(element => {\n            if (element.spec.includes(fields.id) === true) {\n              duplicate = true;\n            }\n          });\n\n          if (duplicate === false) {\n            custonspec = {\n              id: fields.id,\n              spec: fields.id\n            };\n            updateCanonItems.push(custonspec);\n            setUpdateCanonItems(updateCanonItems);\n            setCustomelectedbookObj(value);\n            logger.debug('customspecification.js', 'updated customSpec and canonItems on component mount');\n          }\n        });\n      }\n    }); // eslint-disable-next-line\n  }, []);\n\n  const handleSave = () => {\n    logger.debug('customspecification.js', 'calling customSpec handleSave event');\n    let duplicates = false;\n    setCustonOpen(false);\n\n    if (selectedbook) {\n      const selectedbookObj = {\n        id: textRef.current.value,\n        books: selectedbook\n      };\n      customselectedbookObj.push(selectedbookObj);\n      setCustomelectedbookObj(customselectedbookObj);\n    }\n\n    updateCanonItems.forEach(element => {\n      if (element.spec.includes(textRef.current.value) === true) {\n        duplicates = true;\n      }\n    });\n\n    if (duplicates === false && textRef.current.value !== '') {\n      const custonspec = {\n        id: textRef.current.value,\n        spec: textRef.current.value\n      };\n      updateCanonItems.push(custonspec);\n      setUpdateCanonItems(updateCanonItems);\n      setcanonSpecification(textRef.current.value);\n      logger.debug('customspecification.js', `updating canonitem name values with ${textRef.current.value} \n        and updateCanonItems`);\n\n      if (customselectedbookObj !== null) {\n        localForage.setItem('custonSpec', customselectedbookObj, () => {\n          localForage.getItem('custonSpec', err => {\n            if (err) {\n              logger.error('customspecification.js', 'failed to update db with customSpecvalues on save');\n            }\n          });\n        });\n      }\n    }\n\n    logger.debug('customspecification.js', 'handleSave is finished and selectedbook state to empty');\n    setSelectedbook([]);\n  };\n\n  const selectedBooks = bookname => {\n    if (selectedbook.includes(bookname) === false) {\n      selectedbook.push(bookname);\n      setHighlight(!highlight);\n    } else {\n      const selectedIndex = selectedbook.indexOf(bookname);\n      selectedbook.splice(selectedIndex, 1);\n      setSelectedbook(selectedbook);\n      setHighlight(!highlight);\n    }\n  };\n\n  const handleClose = () => {\n    logger.debug('customspecification.js', 'calling handleClose and setcanonSpecification to OT ');\n    setcanonSpecification('OT');\n    setCustonOpen(false);\n  };\n\n  function FormRow() {\n    return __jsx(React.Fragment, null, allbooks.map(bookname => __jsx(Grid, {\n      key: bookname,\n      item: true,\n      xs: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 11\n      }\n    }, __jsx(ListItem, {\n      button: true,\n      className: classes.paper,\n      classes: {\n        selected: classes.selected\n      },\n      selected: selectedbook.includes(bookname),\n      style: {\n        backgroundColor: 'white'\n      },\n      onClick: () => selectedBooks(bookname),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 13\n      }\n    }, __jsx(ListItemText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 15\n      }\n    }, __jsx(\"span\", {\n      className: classes.listtext,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 17\n      }\n    }, bookname))))));\n  }\n\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 5\n    }\n  }, __jsx(Dialog, {\n    maxWidth: \"xl\",\n    fullWidth: true,\n    TransitionComponent: Transition,\n    onClose: handleClose,\n    \"aria-labelledby\": \"customized-dialog-title\",\n    open: opencustom,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }\n  }, __jsx(DialogTitle, {\n    id: \"customized-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 9\n    }\n  }, __jsx(Box, {\n    fontWeight: 600,\n    m: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 11\n    }\n  }, \"Add Canon Specification\")), __jsx(DialogContent, {\n    dividers: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 9\n    }\n  }, __jsx(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 11\n    }\n  }, __jsx(FormControl, {\n    component: \"fieldset\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 13\n    }\n  }, __jsx(FormLabel, {\n    component: \"legend\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 15\n    }\n  }, __jsx(Box, {\n    fontWeight: 600,\n    m: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 17\n    }\n  }, \"Canon Specification Name\")), __jsx(TextField, {\n    className: classes.Specification,\n    variant: \"outlined\",\n    placeholder: \"Enter canon specification name\",\n    type: \"text\",\n    required: true,\n    inputRef: textRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 15\n    }\n  }))), __jsx(\"div\", {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 11\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 13\n    }\n  }, __jsx(Grid, {\n    container: true,\n    item: true,\n    xs: 12,\n    spacing: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 15\n    }\n  }, __jsx(FormRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 17\n    }\n  }))))), __jsx(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 9\n    }\n  }, __jsx(Button, {\n    autoFocus: true,\n    onClick: handleClose,\n    variant: \"contained\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 11\n    }\n  }, \"Cancel\"), __jsx(Button, {\n    autoFocus: true,\n    onClick: handleSave,\n    variant: \"contained\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 11\n    }\n  }, \"Create\"))));\n}\nCustomSpecification.propTypes = {\n  opencustom: PropTypes.bool.isRequired,\n  setCustonOpen: PropTypes.func,\n  allbooks: PropTypes.array,\n  setContent: PropTypes.func,\n  canonSpecification: PropTypes.string,\n  updateCanonItems: PropTypes.array,\n  setUpdateCanonItems: PropTypes.func,\n  setcanonSpecification: PropTypes.func\n};","map":{"version":3,"sources":["/home/asherphilip/Documents/autographa/renderer/src/components/ProjectsPage/CreateProject/CustomSpecification.js"],"names":["React","useEffect","useRef","PropTypes","withStyles","Button","Dialog","MuiDialogTitle","MuiDialogContent","MuiDialogActions","IconButton","CloseIcon","Typography","Box","FormControl","FormLabel","Grid","ListItem","ListItemText","TextField","Zoom","localForage","CreateProjectStyles","logger","Transition","forwardRef","props","ref","transitionDelay","styles","theme","root","margin","padding","spacing","closeButton","position","right","top","color","palette","grey","DialogTitle","children","classes","onClose","other","DialogContent","DialogActions","CustomSpecification","opencustom","setCustonOpen","allbooks","setContent","canonSpecification","updateCanonItems","setUpdateCanonItems","setcanonSpecification","textRef","selectedbook","setSelectedbook","useState","highlight","setHighlight","customselectedbookObj","setCustomelectedbookObj","getItem","err","value","debug","error","result","filter","obj","id","undefined","books","custonspec","duplicate","forEach","fields","element","spec","includes","push","handleSave","duplicates","selectedbookObj","current","setItem","selectedBooks","bookname","selectedIndex","indexOf","splice","handleClose","FormRow","map","paper","selected","backgroundColor","listtext","Specification","propTypes","bool","isRequired","func","array","string"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\nimport MuiDialogContent from '@material-ui/core/DialogContent';\nimport MuiDialogActions from '@material-ui/core/DialogActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Typography from '@material-ui/core/Typography';\nimport {\n  Box,\n  FormControl,\n  FormLabel,\n  Grid,\n  ListItem,\n  ListItemText,\n  TextField,\n  Zoom,\n} from '@material-ui/core';\nimport * as localForage from 'localforage';\nimport { CreateProjectStyles } from './useStyles/CreateProjectStyles';\nimport * as logger from '../../../logger';\n\nconst Transition = React.forwardRef((props, ref) => (\n  <Zoom\n    style={{ transitionDelay: '50ms' }}\n    direction=\"up\"\n    ref={ref}\n    {...props}\n  />\n));\n\nconst styles = (theme) => ({\n  root: {\n    margin: 0,\n    padding: theme.spacing(2),\n  },\n  closeButton: {\n    position: 'absolute',\n    right: theme.spacing(1),\n    top: theme.spacing(1),\n    color: theme.palette.grey[500],\n  },\n});\n\nconst DialogTitle = withStyles(styles)((props) => {\n  const {\n    children, classes, onClose, ...other\n  } = props;\n  return (\n    <MuiDialogTitle disableTypography className={classes.root} {...other}>\n      <Typography variant=\"h6\">{children}</Typography>\n      {onClose ? (\n        <IconButton\n          aria-label=\"close\"\n          className={classes.closeButton}\n          onClick={onClose}\n        >\n          <CloseIcon />\n        </IconButton>\n      ) : null}\n    </MuiDialogTitle>\n  );\n});\n\nconst DialogContent = withStyles((theme) => ({\n  root: {\n    padding: theme.spacing(2),\n  },\n}))(MuiDialogContent);\n\nconst DialogActions = withStyles((theme) => ({\n  root: {\n    margin: 0,\n    padding: theme.spacing(1),\n  },\n}))(MuiDialogActions);\n\nexport default function CustomSpecification({\n  opencustom,\n  setCustonOpen,\n  allbooks,\n  setContent,\n  canonSpecification,\n  updateCanonItems,\n  setUpdateCanonItems,\n  setcanonSpecification,\n}) {\n  const classes = CreateProjectStyles();\n  const textRef = useRef();\n  const [selectedbook, setSelectedbook] = React.useState([]);\n  const [highlight, setHighlight] = React.useState(false);\n  const [customselectedbookObj, setCustomelectedbookObj] = React.useState([]);\n\n  useEffect(() => {\n    localForage.getItem('custonSpec', (err, value) => {\n      setCustomelectedbookObj(value);\n      logger.debug(\n        'customspecification.js', `changed custom on canonSpec change with ${customselectedbookObj}`,\n      );\n      if (err) { logger.error('customspecification.js', 'failed to get customspec'); }\n    });\n    if (customselectedbookObj) {\n      const result = customselectedbookObj.filter((obj) => obj.id === canonSpecification);\n      if (result[0] !== undefined) {\n        setContent(result[0].books);\n      }\n    }\n    // eslint-disable-next-line\n  },[canonSpecification])\n\n  useEffect(() => {\n    localForage.getItem('custonSpec', (err, value) => {\n      let custonspec;\n      let duplicate = false;\n      if (value !== null) {\n        value.forEach((fields) => {\n          updateCanonItems.forEach((element) => {\n            if (element.spec.includes(fields.id) === true) {\n              duplicate = true;\n            }\n          });\n          if (duplicate === false) {\n            custonspec = { id: fields.id, spec: fields.id };\n            updateCanonItems.push(custonspec);\n            setUpdateCanonItems(updateCanonItems);\n            setCustomelectedbookObj(value);\n            logger.debug(\n              'customspecification.js', 'updated customSpec and canonItems on component mount',\n            );\n          }\n        });\n      }\n    });\n    // eslint-disable-next-line\n  },[])\n\n  const handleSave = () => {\n    logger.debug('customspecification.js', 'calling customSpec handleSave event');\n    let duplicates = false;\n    setCustonOpen(false);\n    if (selectedbook) {\n      const selectedbookObj = { id: textRef.current.value, books: selectedbook };\n      customselectedbookObj.push(selectedbookObj);\n      setCustomelectedbookObj(customselectedbookObj);\n    }\n\n    updateCanonItems.forEach((element) => {\n      if (element.spec.includes(textRef.current.value) === true) {\n        duplicates = true;\n      }\n    });\n    if (duplicates === false && textRef.current.value !== '') {\n      const custonspec = {\n        id: textRef.current.value,\n        spec: textRef.current.value,\n      };\n      updateCanonItems.push(custonspec);\n      setUpdateCanonItems(updateCanonItems);\n      setcanonSpecification(textRef.current.value);\n      logger.debug(\n        'customspecification.js',\n        `updating canonitem name values with ${textRef.current.value} \n        and updateCanonItems`,\n      );\n      if (customselectedbookObj !== null) {\n        localForage.setItem('custonSpec', customselectedbookObj, () => {\n          localForage.getItem('custonSpec', (err) => {\n            if (err) {\n              logger.error(\n                'customspecification.js',\n                'failed to update db with customSpecvalues on save',\n              );\n            }\n          });\n        });\n      }\n    }\n    logger.debug(\n      'customspecification.js',\n      'handleSave is finished and selectedbook state to empty',\n    );\n    setSelectedbook([]);\n  };\n\n  const selectedBooks = (bookname) => {\n    if (selectedbook.includes(bookname) === false) {\n      selectedbook.push(bookname);\n      setHighlight(!highlight);\n    } else {\n      const selectedIndex = selectedbook.indexOf(bookname);\n      selectedbook.splice(selectedIndex, 1);\n      setSelectedbook(selectedbook);\n      setHighlight(!highlight);\n    }\n  };\n\n  const handleClose = () => {\n    logger.debug(\n      'customspecification.js',\n      'calling handleClose and setcanonSpecification to OT ',\n    );\n    setcanonSpecification('OT');\n    setCustonOpen(false);\n  };\n\n  function FormRow() {\n    return (\n      <>\n        {allbooks.map((bookname) => (\n          <Grid key={bookname} item xs={2}>\n            <ListItem\n              button\n              className={classes.paper}\n              classes={{ selected: classes.selected }}\n              selected={selectedbook.includes(bookname)}\n              style={{ backgroundColor: 'white' }}\n              onClick={() => selectedBooks(bookname)}\n            >\n              <ListItemText>\n                <span className={classes.listtext}>{bookname}</span>\n              </ListItemText>\n            </ListItem>\n          </Grid>\n        ))}\n      </>\n    );\n  }\n\n  return (\n    <div>\n      <Dialog\n        maxWidth=\"xl\"\n        fullWidth\n        TransitionComponent={Transition}\n        onClose={handleClose}\n        aria-labelledby=\"customized-dialog-title\"\n        open={opencustom}\n      >\n        <DialogTitle id=\"customized-dialog-title\">\n          <Box fontWeight={600} m={1}>\n            Add Canon Specification\n          </Box>\n        </DialogTitle>\n        <DialogContent dividers>\n          <form>\n            <FormControl component=\"fieldset\">\n              <FormLabel component=\"legend\">\n                <Box fontWeight={600} m={1}>\n                  Canon Specification Name\n                </Box>\n              </FormLabel>\n              <TextField\n                className={classes.Specification}\n                variant=\"outlined\"\n                placeholder=\"Enter canon specification name\"\n                type=\"text\"\n                required\n                inputRef={textRef}\n              />\n            </FormControl>\n          </form>\n          <div className={classes.root}>\n            <Grid container spacing={1}>\n              <Grid container item xs={12} spacing={3}>\n                <FormRow />\n              </Grid>\n            </Grid>\n          </div>\n        </DialogContent>\n        <DialogActions>\n          <Button autoFocus onClick={handleClose} variant=\"contained\">\n            Cancel\n          </Button>\n          <Button\n            autoFocus\n            onClick={handleSave}\n            variant=\"contained\"\n            color=\"primary\"\n          >\n            Create\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}\nCustomSpecification.propTypes = {\n  opencustom: PropTypes.bool.isRequired,\n  setCustonOpen: PropTypes.func,\n  allbooks: PropTypes.array,\n  setContent: PropTypes.func,\n  canonSpecification: PropTypes.string,\n  updateCanonItems: PropTypes.array,\n  setUpdateCanonItems: PropTypes.func,\n  setcanonSpecification: PropTypes.func,\n};\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _slicedToArray from \"/home/asherphilip/Documents/autographa/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/home/asherphilip/Documents/autographa/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _extends from \"/home/asherphilip/Documents/autographa/node_modules/@babel/runtime/helpers/esm/extends\";\n\nvar _jsxFileName = \"/home/asherphilip/Documents/autographa/renderer/src/components/ProjectsPage/CreateProject/CustomSpecification.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\nimport MuiDialogContent from '@material-ui/core/DialogContent';\nimport MuiDialogActions from '@material-ui/core/DialogActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Typography from '@material-ui/core/Typography';\nimport { Box, FormControl, FormLabel, Grid, ListItem, ListItemText, TextField, Zoom } from '@material-ui/core';\nimport * as localForage from 'localforage';\nimport { CreateProjectStyles } from './useStyles/CreateProjectStyles';\nimport * as logger from '../../../logger';\nvar Transition = /*#__PURE__*/React.forwardRef(_c = function _c(props, ref) {\n  return __jsx(Zoom, _extends({\n    style: {\n      transitionDelay: '50ms'\n    },\n    direction: \"up\",\n    ref: ref\n  }, props, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 3\n    }\n  }));\n});\n_c2 = Transition;\n\nvar styles = function styles(theme) {\n  return {\n    root: {\n      margin: 0,\n      padding: theme.spacing(2)\n    },\n    closeButton: {\n      position: 'absolute',\n      right: theme.spacing(1),\n      top: theme.spacing(1),\n      color: theme.palette.grey[500]\n    }\n  };\n};\n\nvar DialogTitle = withStyles(styles)(function (props) {\n  var children = props.children,\n      classes = props.classes,\n      onClose = props.onClose,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"onClose\"]);\n\n  return __jsx(MuiDialogTitle, _extends({\n    disableTypography: true,\n    className: classes.root\n  }, other, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }), __jsx(Typography, {\n    variant: \"h6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, children), onClose ? __jsx(IconButton, {\n    \"aria-label\": \"close\",\n    className: classes.closeButton,\n    onClick: onClose,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, __jsx(CloseIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  })) : null);\n});\nvar DialogContent = withStyles(function (theme) {\n  return {\n    root: {\n      padding: theme.spacing(2)\n    }\n  };\n})(MuiDialogContent);\nvar DialogActions = withStyles(function (theme) {\n  return {\n    root: {\n      margin: 0,\n      padding: theme.spacing(1)\n    }\n  };\n})(MuiDialogActions);\nexport default function CustomSpecification(_ref) {\n  _s();\n\n  var opencustom = _ref.opencustom,\n      setCustonOpen = _ref.setCustonOpen,\n      allbooks = _ref.allbooks,\n      setContent = _ref.setContent,\n      canonSpecification = _ref.canonSpecification,\n      updateCanonItems = _ref.updateCanonItems,\n      setUpdateCanonItems = _ref.setUpdateCanonItems,\n      setcanonSpecification = _ref.setcanonSpecification;\n  var classes = CreateProjectStyles();\n  var textRef = useRef();\n\n  var _React$useState = React.useState([]),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      selectedbook = _React$useState2[0],\n      setSelectedbook = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      highlight = _React$useState4[0],\n      setHighlight = _React$useState4[1];\n\n  var _React$useState5 = React.useState([]),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      customselectedbookObj = _React$useState6[0],\n      setCustomelectedbookObj = _React$useState6[1];\n\n  useEffect(function () {\n    localForage.getItem('custonSpec', function (err, value) {\n      setCustomelectedbookObj(value);\n      logger.debug('customspecification.js', \"changed custom on canonSpec change with \".concat(customselectedbookObj));\n\n      if (err) {\n        logger.error('customspecification.js', 'failed to get customspec');\n      }\n    });\n\n    if (customselectedbookObj) {\n      var result = customselectedbookObj.filter(function (obj) {\n        return obj.id === canonSpecification;\n      });\n\n      if (result[0] !== undefined) {\n        setContent(result[0].books);\n      }\n    } // eslint-disable-next-line\n\n  }, [canonSpecification]);\n  useEffect(function () {\n    localForage.getItem('custonSpec', function (err, value) {\n      var custonspec;\n      var duplicate = false;\n\n      if (value !== null) {\n        value.forEach(function (fields) {\n          updateCanonItems.forEach(function (element) {\n            if (element.spec.includes(fields.id) === true) {\n              duplicate = true;\n            }\n          });\n\n          if (duplicate === false) {\n            custonspec = {\n              id: fields.id,\n              spec: fields.id\n            };\n            updateCanonItems.push(custonspec);\n            setUpdateCanonItems(updateCanonItems);\n            setCustomelectedbookObj(value);\n            logger.debug('customspecification.js', 'updated customSpec and canonItems on component mount');\n          }\n        });\n      }\n    }); // eslint-disable-next-line\n  }, []);\n\n  var handleSave = function handleSave() {\n    logger.debug('customspecification.js', 'calling customSpec handleSave event');\n    var duplicates = false;\n    setCustonOpen(false);\n\n    if (selectedbook) {\n      var selectedbookObj = {\n        id: textRef.current.value,\n        books: selectedbook\n      };\n      customselectedbookObj.push(selectedbookObj);\n      setCustomelectedbookObj(customselectedbookObj);\n    }\n\n    updateCanonItems.forEach(function (element) {\n      if (element.spec.includes(textRef.current.value) === true) {\n        duplicates = true;\n      }\n    });\n\n    if (duplicates === false && textRef.current.value !== '') {\n      var custonspec = {\n        id: textRef.current.value,\n        spec: textRef.current.value\n      };\n      updateCanonItems.push(custonspec);\n      setUpdateCanonItems(updateCanonItems);\n      setcanonSpecification(textRef.current.value);\n      logger.debug('customspecification.js', \"updating canonitem name values with \".concat(textRef.current.value, \" \\n        and updateCanonItems\"));\n\n      if (customselectedbookObj !== null) {\n        localForage.setItem('custonSpec', customselectedbookObj, function () {\n          localForage.getItem('custonSpec', function (err) {\n            if (err) {\n              logger.error('customspecification.js', 'failed to update db with customSpecvalues on save');\n            }\n          });\n        });\n      }\n    }\n\n    logger.debug('customspecification.js', 'handleSave is finished and selectedbook state to empty');\n    setSelectedbook([]);\n  };\n\n  var selectedBooks = function selectedBooks(bookname) {\n    if (selectedbook.includes(bookname) === false) {\n      selectedbook.push(bookname);\n      setHighlight(!highlight);\n    } else {\n      var selectedIndex = selectedbook.indexOf(bookname);\n      selectedbook.splice(selectedIndex, 1);\n      setSelectedbook(selectedbook);\n      setHighlight(!highlight);\n    }\n  };\n\n  var handleClose = function handleClose() {\n    logger.debug('customspecification.js', 'calling handleClose and setcanonSpecification to OT ');\n    setcanonSpecification('OT');\n    setCustonOpen(false);\n  };\n\n  function FormRow() {\n    var _this2 = this;\n\n    return __jsx(React.Fragment, null, allbooks.map(function (bookname) {\n      return __jsx(Grid, {\n        key: bookname,\n        item: true,\n        xs: 2,\n        __self: _this2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }\n      }, __jsx(ListItem, {\n        button: true,\n        className: classes.paper,\n        classes: {\n          selected: classes.selected\n        },\n        selected: selectedbook.includes(bookname),\n        style: {\n          backgroundColor: 'white'\n        },\n        onClick: function onClick() {\n          return selectedBooks(bookname);\n        },\n        __self: _this2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 13\n        }\n      }, __jsx(ListItemText, {\n        __self: _this2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 15\n        }\n      }, __jsx(\"span\", {\n        className: classes.listtext,\n        __self: _this2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 17\n        }\n      }, bookname))));\n    }));\n  }\n\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 5\n    }\n  }, __jsx(Dialog, {\n    maxWidth: \"xl\",\n    fullWidth: true,\n    TransitionComponent: Transition,\n    onClose: handleClose,\n    \"aria-labelledby\": \"customized-dialog-title\",\n    open: opencustom,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }\n  }, __jsx(DialogTitle, {\n    id: \"customized-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 9\n    }\n  }, __jsx(Box, {\n    fontWeight: 600,\n    m: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 11\n    }\n  }, \"Add Canon Specification\")), __jsx(DialogContent, {\n    dividers: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 9\n    }\n  }, __jsx(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 11\n    }\n  }, __jsx(FormControl, {\n    component: \"fieldset\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 13\n    }\n  }, __jsx(FormLabel, {\n    component: \"legend\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 15\n    }\n  }, __jsx(Box, {\n    fontWeight: 600,\n    m: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 17\n    }\n  }, \"Canon Specification Name\")), __jsx(TextField, {\n    className: classes.Specification,\n    variant: \"outlined\",\n    placeholder: \"Enter canon specification name\",\n    type: \"text\",\n    required: true,\n    inputRef: textRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 15\n    }\n  }))), __jsx(\"div\", {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 11\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 13\n    }\n  }, __jsx(Grid, {\n    container: true,\n    item: true,\n    xs: 12,\n    spacing: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 15\n    }\n  }, __jsx(FormRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 17\n    }\n  }))))), __jsx(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 9\n    }\n  }, __jsx(Button, {\n    autoFocus: true,\n    onClick: handleClose,\n    variant: \"contained\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 11\n    }\n  }, \"Cancel\"), __jsx(Button, {\n    autoFocus: true,\n    onClick: handleSave,\n    variant: \"contained\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 11\n    }\n  }, \"Create\"))));\n}\n\n_s(CustomSpecification, \"t/hjkcUDu3U2Rzi53a9XKjpEre0=\");\n\n_c3 = CustomSpecification;\nCustomSpecification.propTypes = {\n  opencustom: PropTypes.bool.isRequired,\n  setCustonOpen: PropTypes.func,\n  allbooks: PropTypes.array,\n  setContent: PropTypes.func,\n  canonSpecification: PropTypes.string,\n  updateCanonItems: PropTypes.array,\n  setUpdateCanonItems: PropTypes.func,\n  setcanonSpecification: PropTypes.func\n};\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Transition$React.forwardRef\");\n$RefreshReg$(_c2, \"Transition\");\n$RefreshReg$(_c3, \"CustomSpecification\");","map":{"version":3,"sources":["/home/asherphilip/Documents/autographa/renderer/src/components/ProjectsPage/CreateProject/CustomSpecification.js"],"names":["React","useEffect","useRef","PropTypes","withStyles","Button","Dialog","MuiDialogTitle","MuiDialogContent","MuiDialogActions","IconButton","CloseIcon","Typography","Box","FormControl","FormLabel","Grid","ListItem","ListItemText","TextField","Zoom","localForage","CreateProjectStyles","logger","Transition","forwardRef","props","ref","transitionDelay","styles","theme","root","margin","padding","spacing","closeButton","position","right","top","color","palette","grey","DialogTitle","children","classes","onClose","other","DialogContent","DialogActions","CustomSpecification","opencustom","setCustonOpen","allbooks","setContent","canonSpecification","updateCanonItems","setUpdateCanonItems","setcanonSpecification","textRef","useState","selectedbook","setSelectedbook","highlight","setHighlight","customselectedbookObj","setCustomelectedbookObj","getItem","err","value","debug","error","result","filter","obj","id","undefined","books","custonspec","duplicate","forEach","fields","element","spec","includes","push","handleSave","duplicates","selectedbookObj","current","setItem","selectedBooks","bookname","selectedIndex","indexOf","splice","handleClose","FormRow","map","paper","selected","backgroundColor","listtext","Specification","propTypes","bool","isRequired","func","array","string"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\nimport MuiDialogContent from '@material-ui/core/DialogContent';\nimport MuiDialogActions from '@material-ui/core/DialogActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Typography from '@material-ui/core/Typography';\nimport {\n  Box,\n  FormControl,\n  FormLabel,\n  Grid,\n  ListItem,\n  ListItemText,\n  TextField,\n  Zoom,\n} from '@material-ui/core';\nimport * as localForage from 'localforage';\nimport { CreateProjectStyles } from './useStyles/CreateProjectStyles';\nimport * as logger from '../../../logger';\n\nconst Transition = React.forwardRef((props, ref) => (\n  <Zoom\n    style={{ transitionDelay: '50ms' }}\n    direction=\"up\"\n    ref={ref}\n    {...props}\n  />\n));\n\nconst styles = (theme) => ({\n  root: {\n    margin: 0,\n    padding: theme.spacing(2),\n  },\n  closeButton: {\n    position: 'absolute',\n    right: theme.spacing(1),\n    top: theme.spacing(1),\n    color: theme.palette.grey[500],\n  },\n});\n\nconst DialogTitle = withStyles(styles)((props) => {\n  const {\n    children, classes, onClose, ...other\n  } = props;\n  return (\n    <MuiDialogTitle disableTypography className={classes.root} {...other}>\n      <Typography variant=\"h6\">{children}</Typography>\n      {onClose ? (\n        <IconButton\n          aria-label=\"close\"\n          className={classes.closeButton}\n          onClick={onClose}\n        >\n          <CloseIcon />\n        </IconButton>\n      ) : null}\n    </MuiDialogTitle>\n  );\n});\n\nconst DialogContent = withStyles((theme) => ({\n  root: {\n    padding: theme.spacing(2),\n  },\n}))(MuiDialogContent);\n\nconst DialogActions = withStyles((theme) => ({\n  root: {\n    margin: 0,\n    padding: theme.spacing(1),\n  },\n}))(MuiDialogActions);\n\nexport default function CustomSpecification({\n  opencustom,\n  setCustonOpen,\n  allbooks,\n  setContent,\n  canonSpecification,\n  updateCanonItems,\n  setUpdateCanonItems,\n  setcanonSpecification,\n}) {\n  const classes = CreateProjectStyles();\n  const textRef = useRef();\n  const [selectedbook, setSelectedbook] = React.useState([]);\n  const [highlight, setHighlight] = React.useState(false);\n  const [customselectedbookObj, setCustomelectedbookObj] = React.useState([]);\n\n  useEffect(() => {\n    localForage.getItem('custonSpec', (err, value) => {\n      setCustomelectedbookObj(value);\n      logger.debug(\n        'customspecification.js', `changed custom on canonSpec change with ${customselectedbookObj}`,\n      );\n      if (err) { logger.error('customspecification.js', 'failed to get customspec'); }\n    });\n    if (customselectedbookObj) {\n      const result = customselectedbookObj.filter((obj) => obj.id === canonSpecification);\n      if (result[0] !== undefined) {\n        setContent(result[0].books);\n      }\n    }\n    // eslint-disable-next-line\n  },[canonSpecification])\n\n  useEffect(() => {\n    localForage.getItem('custonSpec', (err, value) => {\n      let custonspec;\n      let duplicate = false;\n      if (value !== null) {\n        value.forEach((fields) => {\n          updateCanonItems.forEach((element) => {\n            if (element.spec.includes(fields.id) === true) {\n              duplicate = true;\n            }\n          });\n          if (duplicate === false) {\n            custonspec = { id: fields.id, spec: fields.id };\n            updateCanonItems.push(custonspec);\n            setUpdateCanonItems(updateCanonItems);\n            setCustomelectedbookObj(value);\n            logger.debug(\n              'customspecification.js', 'updated customSpec and canonItems on component mount',\n            );\n          }\n        });\n      }\n    });\n    // eslint-disable-next-line\n  },[])\n\n  const handleSave = () => {\n    logger.debug('customspecification.js', 'calling customSpec handleSave event');\n    let duplicates = false;\n    setCustonOpen(false);\n    if (selectedbook) {\n      const selectedbookObj = { id: textRef.current.value, books: selectedbook };\n      customselectedbookObj.push(selectedbookObj);\n      setCustomelectedbookObj(customselectedbookObj);\n    }\n\n    updateCanonItems.forEach((element) => {\n      if (element.spec.includes(textRef.current.value) === true) {\n        duplicates = true;\n      }\n    });\n    if (duplicates === false && textRef.current.value !== '') {\n      const custonspec = {\n        id: textRef.current.value,\n        spec: textRef.current.value,\n      };\n      updateCanonItems.push(custonspec);\n      setUpdateCanonItems(updateCanonItems);\n      setcanonSpecification(textRef.current.value);\n      logger.debug(\n        'customspecification.js',\n        `updating canonitem name values with ${textRef.current.value} \n        and updateCanonItems`,\n      );\n      if (customselectedbookObj !== null) {\n        localForage.setItem('custonSpec', customselectedbookObj, () => {\n          localForage.getItem('custonSpec', (err) => {\n            if (err) {\n              logger.error(\n                'customspecification.js',\n                'failed to update db with customSpecvalues on save',\n              );\n            }\n          });\n        });\n      }\n    }\n    logger.debug(\n      'customspecification.js',\n      'handleSave is finished and selectedbook state to empty',\n    );\n    setSelectedbook([]);\n  };\n\n  const selectedBooks = (bookname) => {\n    if (selectedbook.includes(bookname) === false) {\n      selectedbook.push(bookname);\n      setHighlight(!highlight);\n    } else {\n      const selectedIndex = selectedbook.indexOf(bookname);\n      selectedbook.splice(selectedIndex, 1);\n      setSelectedbook(selectedbook);\n      setHighlight(!highlight);\n    }\n  };\n\n  const handleClose = () => {\n    logger.debug(\n      'customspecification.js',\n      'calling handleClose and setcanonSpecification to OT ',\n    );\n    setcanonSpecification('OT');\n    setCustonOpen(false);\n  };\n\n  function FormRow() {\n    return (\n      <>\n        {allbooks.map((bookname) => (\n          <Grid key={bookname} item xs={2}>\n            <ListItem\n              button\n              className={classes.paper}\n              classes={{ selected: classes.selected }}\n              selected={selectedbook.includes(bookname)}\n              style={{ backgroundColor: 'white' }}\n              onClick={() => selectedBooks(bookname)}\n            >\n              <ListItemText>\n                <span className={classes.listtext}>{bookname}</span>\n              </ListItemText>\n            </ListItem>\n          </Grid>\n        ))}\n      </>\n    );\n  }\n\n  return (\n    <div>\n      <Dialog\n        maxWidth=\"xl\"\n        fullWidth\n        TransitionComponent={Transition}\n        onClose={handleClose}\n        aria-labelledby=\"customized-dialog-title\"\n        open={opencustom}\n      >\n        <DialogTitle id=\"customized-dialog-title\">\n          <Box fontWeight={600} m={1}>\n            Add Canon Specification\n          </Box>\n        </DialogTitle>\n        <DialogContent dividers>\n          <form>\n            <FormControl component=\"fieldset\">\n              <FormLabel component=\"legend\">\n                <Box fontWeight={600} m={1}>\n                  Canon Specification Name\n                </Box>\n              </FormLabel>\n              <TextField\n                className={classes.Specification}\n                variant=\"outlined\"\n                placeholder=\"Enter canon specification name\"\n                type=\"text\"\n                required\n                inputRef={textRef}\n              />\n            </FormControl>\n          </form>\n          <div className={classes.root}>\n            <Grid container spacing={1}>\n              <Grid container item xs={12} spacing={3}>\n                <FormRow />\n              </Grid>\n            </Grid>\n          </div>\n        </DialogContent>\n        <DialogActions>\n          <Button autoFocus onClick={handleClose} variant=\"contained\">\n            Cancel\n          </Button>\n          <Button\n            autoFocus\n            onClick={handleSave}\n            variant=\"contained\"\n            color=\"primary\"\n          >\n            Create\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}\nCustomSpecification.propTypes = {\n  opencustom: PropTypes.bool.isRequired,\n  setCustonOpen: PropTypes.func,\n  allbooks: PropTypes.array,\n  setContent: PropTypes.func,\n  canonSpecification: PropTypes.string,\n  updateCanonItems: PropTypes.array,\n  setUpdateCanonItems: PropTypes.func,\n  setcanonSpecification: PropTypes.func,\n};\n"]},"metadata":{},"sourceType":"module"}